<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Redirecting…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;margin:32px}</style>
</head>
<body>
  <h3>Открываем приложение…</h3>
  <p>Если не открылось автоматически, нажмите кнопку ниже.</p>
  <button id="open" style="padding:12px 16px;font-size:16px">Открыть VoltLab</button>

  <script>
    const raw = location.hash || location.search || "";
    const qs = raw.replace(/^[#?]/, "");

    const IOS_SCHEME = "ru.sever.ElectricalEngineering";
    const ANDROID_SCHEME = "air.ru.sever.ElectricalEngineering";
    const ANDROID_PACKAGE = "air.ru.sever.ElectricalEngineering";

    const hrefIOS = `${IOS_SCHEME}://reset-password#${qs}`;
    const hrefAndroidScheme = `${ANDROID_SCHEME}://reset-password?${qs}`;
    const hrefAndroidIntent =
      `intent://reset-password?${qs}` +
      `#Intent;scheme=${ANDROID_SCHEME};package=${ANDROID_PACKAGE};end`;

    const isAndroid = /Android/i.test(navigator.userAgent);

    function openApp() {
      if (isAndroid) {
        location.href = hrefAndroidIntent;
        setTimeout(() => { location.href = hrefAndroidScheme; }, 300);
      } else {
        location.href = hrefIOS;
      }
    }

    document.getElementById('open').addEventListener('click', openApp);
    setTimeout(openApp, 200);
  </script>
</body>
</html>
